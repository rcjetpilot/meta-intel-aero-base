From bb9046a5375a2a608e732c6d3b799725f488b564 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Jos=C3=A9=20Roberto=20de=20Souza?= <jose.souza@intel.com>
Date: Wed, 7 Jun 2017 17:38:46 -0700
Subject: [PATCH 5/5] drivers: media: atomisp: Allow user set absolute exposure

---
 drivers/media/pci/atomisp/atomisp_driver/atomisp_ioctl.c | 10 ++++++++++
 1 file changed, 10 insertions(+)

diff --git a/drivers/media/pci/atomisp/atomisp_driver/atomisp_ioctl.c b/drivers/media/pci/atomisp/atomisp_driver/atomisp_ioctl.c
index 78decdaf6bea..75c07eeb577d 100644
--- a/drivers/media/pci/atomisp/atomisp_driver/atomisp_ioctl.c
+++ b/drivers/media/pci/atomisp/atomisp_driver/atomisp_ioctl.c
@@ -239,6 +239,15 @@ static struct v4l2_queryctrl ci_v4l2_controls[] = {
 		.default_value = 0,
 	},
 	{
+		.id = V4L2_CID_EXPOSURE_ABSOLUTE,
+		.type = V4L2_CTRL_TYPE_INTEGER,
+		.name = "exposure absolute",
+		.minimum = -4,
+		.maximum = 4,
+		.step = 1,
+		.default_value = 0,
+	},
+	{
 		.id = V4L2_CID_EXPOSURE_ZONE_NUM,
 		.type = V4L2_CTRL_TYPE_INTEGER,
 		.name = "one-time exposure zone number",
@@ -2314,6 +2323,7 @@ static int atomisp_s_ctrl(struct file *file, void *fh,
 	switch (control->id) {
 	case V4L2_CID_AUTO_N_PRESET_WHITE_BALANCE:
 	case V4L2_CID_EXPOSURE:
+	case V4L2_CID_EXPOSURE_ABSOLUTE:
 	case V4L2_CID_HFLIP:
 	case V4L2_CID_VFLIP:
 	case V4L2_CID_EXPOSURE_AUTO:
-- 
2.13.1

